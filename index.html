<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PICNIC DE GIRLS PRE CUMPLEAÃ‘OS MEL <3</title>

<link href="https://fonts.googleapis.com/css2?family=Sour+Gummy:wght@400;600&family=Comic+Neue:wght@300;400&display=swap" rel="stylesheet">

<style>
/* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
/* ESTILOS IGUAL QUE LOS TUYOS */
/* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */

:root {
  --bg: #0a0a0f;
  --fg: #ffffff;
  --pink: #ffd6e7;
  --heart: #ff2b4f;
  --textGlow: 0 0 .6rem rgba(255, 214, 231, .9);
}

#passwordScreen {
  display: flex;
  height: 100vh;
  width: 100%;
  background-color: var(--bg);
  color: var(--fg);
  font-family: 'Sour Gummy', cursive;
}

.left {
  width: 40%;
}

.left img {
  width: 100%;
  height: 100vh;
  object-fit: cover;
}

.right {
  width: 60%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: #1a0013;
  color: var(--pink);
  text-align: center;
}

.right h2 {
  font-size: 2.2em;
  text-shadow: var(--textGlow);
  margin-bottom: 1em;
}

.right input {
  padding: 0.7em 1em;
  border-radius: 12px;
  border: none;
  outline: none;
  text-align: center;
  font-size: 1em;
  width: 220px;
  margin-bottom: 1em;
  background-color: #2a0020;
  color: var(--pink);
}

.right button {
  background-color: var(--heart);
  border: none;
  color: white;
  font-size: 1em;
  padding: 8px 18px;
  border-radius: 12px;
  cursor: pointer;
  transition: 0.3s;
}

#mainContent {
  display: none;
}

button:hover {
  transform: scale(1.06);
}

body {
  margin: 0;
  background-color: #ffe6f2;
  font-family: "Comic Neue", cursive;
  color: #b30059;
  text-align: center;
  overflow-x: hidden;
}

.mensaje-box {
  background-color: white;
  width: 85%;
  max-width: 650px;
  margin: 25px auto;
  padding: 20px;
  border-radius: 15px;
  box-shadow: 0 0 15px rgba(0,0,0,0.1);
}

.carrusel {
  width: 280px;
  height: 180px;
  margin: 0 auto 25px;
  position: relative;
  border-radius: 15px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(255, 105, 180, 0.3);
}

.carrusel img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: none;
}

.carrusel img.active {
  display: block;
}

.flecha {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(255, 182, 193, 0.6);
  border: none;
  color: white;
  padding: 4px 10px;
  border-radius: 50%;
  cursor: pointer;
}

.corazon {
  position: fixed;
  bottom: -10px;
  color: rgba(255, 105, 180, 0.5);
  font-size: 16px;
  animation: flotar 6s linear infinite;
  z-index: 100;
}

@keyframes flotar {
  0% { transform: translateY(0) scale(1); opacity: 0.7; }
  100% { transform: translateY(-100vh) scale(1.5); opacity: 0; }
}

</style>
</head>
<body>

<!-- â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” -->
<!-- PANTALLA DE CONTRASEÃ‘A -->
<!-- â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” -->
<div id="passwordScreen">
  <div class="left">
    <img src="https://files.catbox.moe/opg5vs.jpeg">
  </div>

  <div class="right">
    <h2>PICNIC DE GIRLS PRE CUMPLEAÃ‘OS MEL <3</h2>

    <input id="passwordInput" type="password" placeholder="ContraseÃ±a...">
    <button onclick="checkPassword()">Entrar ğŸ’–</button>

    <p id="errorText" style="display:none; color:#ffbaba;">
      ğŸ’” Clave incorrecta ğŸ’”
    </p>
  </div>
</div>

<!-- â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” -->
<!-- CONTENIDO PRINCIPAL -->
<!-- â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” -->
<div id="mainContent">
  <h1>PALABRAS LINDAS PARA LA CUMPLEAÃ‘ERA ğŸ’—</h1>

  <div class="carrusel" id="carrusel" style="display:none;">
    <button class="flecha izq" onclick="moverCarrusel(-1)">â®</button>
    <button class="flecha der" onclick="moverCarrusel(1)">â¯</button>
  </div>

  <div class="mensaje-box">
    <h3>Escribe tu mensaje para Mel</h3>

    <input id="nombre" placeholder="Tu nombre...">
    <textarea id="mensaje" rows="4" placeholder="Escribe algo bonito..."></textarea>

    <label id="subirFotoLabel" for="foto">AÃ±ade tu foto favorita ğŸ“¸</label>
    <input id="foto" type="file" accept="image/*" style="display:none">

    <button onclick="agregarMensaje()">Guardar mensaje ğŸ’Œ</button>
  </div>

  <div id="mensajes"></div>
</div>


<!-- â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” -->
<!-- SCRIPT FIREBASE COMPLETO -->
<!-- â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” -->
<script type="module">

/* ---------------------------------------------------
   IMPORTS DE FIREBASE
--------------------------------------------------- */
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
import { 
  getFirestore, collection, addDoc, getDocs, doc,
  updateDoc, deleteDoc, query, orderBy
} from "https://www.gstatic.com/firebasejs/10.13.0/firebase-firestore.js";

import { 
  getStorage, ref, uploadBytes, getDownloadURL
} from "https://www.gstatic.com/firebasejs/10.13.0/firebase-storage.js";


/* ---------------------------------------------------
   CONFIGURACIÃ“N FIREBASE â€” LA TUYA ğŸ‘‡
--------------------------------------------------- */
const firebaseConfig = {
  apiKey: "AIzaSyDdliDwEBGd7nNs4_qLX1GFYA_k51N9_lw",
  authDomain: "picnic-mel.firebaseapp.com",
  projectId: "picnic-mel",
  storageBucket: "picnic-mel.firebasestorage.app",
  messagingSenderId: "947882543668",
  appId: "1:947882543668:web:3ac7d55ff179ab60b19861",
  measurementId: "G-WEKRG4FB3B"
};

// Inicializar Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const storage = getStorage(app);


/* ---------------------------------------------------
   PANTALLA DE CONTRASEÃ‘A
--------------------------------------------------- */
window.checkPassword = function () {
  const input = document.getElementById("passwordInput").value.trim().toLowerCase();

  if (input === "mel") {
    document.getElementById("passwordScreen").style.display = "none";
    document.getElementById("mainContent").style.display = "block";
    mostrarMensajes();
    iniciarCorazones();
  } else {
    document.getElementById("errorText").style.display = "block";
  }
};


/* ---------------------------------------------------
   AGREGAR MENSAJE
--------------------------------------------------- */
window.agregarMensaje = async function () {
  const nombre = document.getElementById("nombre").value.trim();
  const mensaje = document.getElementById("mensaje").value.trim();
  const foto = document.getElementById("foto").files[0];

  if (!nombre || !mensaje) {
    alert("Por favor completa tu nombre y mensaje ğŸ’•");
    return;
  }

  let fotoURL = null;

  if (foto) {
    const refFoto = ref(storage, "fotos/" + Date.now() + "_" + foto.name);
    await uploadBytes(refFoto, foto);
    fotoURL = await getDownloadURL(refFoto);
  }

  await addDoc(collection(db, "mensajes"), {
    nombre,
    mensaje,
    imagen: fotoURL,
    fecha: Date.now()
  });

  document.getElementById("nombre").value = "";
  document.getElementById("mensaje").value = "";
  document.getElementById("foto").value = "";

  mostrarMensajes();
};


/* ---------------------------------------------------
   MOSTRAR MENSAJES
--------------------------------------------------- */
async function mostrarMensajes() {
  const cont = document.getElementById("mensajes");
  cont.innerHTML = "";

  const q = query(collection(db, "mensajes"), orderBy("fecha", "desc"));
  const snap = await getDocs(q);

  let fotos = [];

  snap.forEach(docSnap => {
    const m = docSnap.data();
    const id = docSnap.id;

    if (m.imagen) fotos.push(m.imagen);

    const div = document.createElement("div");
    div.classList = "mensaje";

    div.innerHTML = `
      <h3>${m.nombre} ğŸ’•</h3>
      <p>${m.mensaje}</p>
      ${m.imagen ? `<img src="${m.imagen}" style="width:90%; border-radius:12px">` : ""}
      <br>
      <button onclick="editarMensaje('${id}', \`${m.mensaje.replace(/`/g, "\\`")}\`)">Editar</button>
      <button onclick="borrarMensaje('${id}')">Borrar</button>
    `;

    cont.appendChild(div);
  });

  actualizarCarrusel(fotos);
}

window.mostrarMensajes = mostrarMensajes;


/* ---------------------------------------------------
   EDITAR MENSAJE
--------------------------------------------------- */
window.editarMensaje = async function (id, actual) {
  const nuevo = prompt("Edita tu mensaje:", actual);
  if (!nuevo) return;

  await updateDoc(doc(db, "mensajes", id), {
    mensaje: nuevo
  });

  mostrarMensajes();
};


/* ---------------------------------------------------
   BORRAR MENSAJE
--------------------------------------------------- */
window.borrarMensaje = async function (id) {
  if (!confirm("Â¿Seguro que quieres borrar este mensaje?")) return;

  await deleteDoc(doc(db, "mensajes", id));

  mostrarMensajes();
};


/* ---------------------------------------------------
   CARRUSEL
--------------------------------------------------- */
let indice = 0;

function actualizarCarrusel(fotos) {
  const c = document.getElementById("carrusel");

  if (fotos.length === 0) {
    c.style.display = "none";
    return;
  }

  c.innerHTML = `
    <button class="flecha izq" onclick="moverCarrusel(-1)">â®</button>
    <button class="flecha der" onclick="moverCarrusel(1)">â¯</button>
  `;

  fotos.forEach((url, i) => {
    const img = document.createElement("img");
    img.src = url;
    if (i === 0) img.classList.add("active");
    c.appendChild(img);
  });

  c.style.display = "block";
}

window.moverCarrusel = function (dir) {
  const imgs = document.querySelectorAll(".carrusel img");
  imgs[indice].classList.remove("active");
  indice = (indice + dir + imgs.length) % imgs.length;
  imgs[indice].classList.add("active");
};


/* ---------------------------------------------------
   CORAZONES
--------------------------------------------------- */
function iniciarCorazones() {
  setInterval(() => {
    const c = document.createElement("div");
    c.classList.add("corazon");
    c.textContent = "ğŸ’–";
    c.style.left = Math.random() * 100 + "vw";
    c.style.fontSize = (12 + Math.random() * 10) + "px";
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 6000);
  }, 400);
}

window.iniciarCorazones = iniciarCorazones;

</script>

</body>
</html>


